{"ast":null,"code":"import AmazonCognitoIdentity from \"amazon-cognito-identity-js\";\nconst cognitoIdentityServiceProvider = new CognitoIdentityServiceProvider();\nconst USER_POOL_ID = \"eu-west-2_eaV1gT0Qu\";\n\nconst stripe = require(\"stripe\")(\"sk_test_51Hso3kBe49LY5SzjkToG2M0She5VELBzov1NrkkymrjNVC9U9IIkhw3TC2mE3SesSB3LermKcqjuhaj87q4GlIqX00qhDnxT4H\");\n\nconst getUserEmail = async event => {\n  const params = {\n    UserPoolId: USER_POOL_ID,\n    Username: event.identity.claims.username\n  };\n  const user = await cognitoIdentityServiceProvider.adminGetUser(params).promise();\n  const {\n    Value: email\n  } = user.UserAttributes.find(attr => {\n    if (attr.Name === \"email\") {\n      return attr.Value;\n    }\n  });\n  return email;\n};","map":{"version":3,"sources":["/home/serban/Desktop/bytes/src/context/user.js"],"names":["AmazonCognitoIdentity","cognitoIdentityServiceProvider","CognitoIdentityServiceProvider","USER_POOL_ID","stripe","require","getUserEmail","event","params","UserPoolId","Username","identity","claims","username","user","adminGetUser","promise","Value","email","UserAttributes","find","attr","Name"],"mappings":"AAAA,OAAOA,qBAAP,MAAkC,4BAAlC;AAEA,MAAMC,8BAA8B,GAAG,IAAIC,8BAAJ,EAAvC;AACA,MAAMC,YAAY,GAAG,qBAArB;;AACA,MAAMC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkB,6GAAlB,CAAf;;AAEA,MAAMC,YAAY,GAAG,MAAOC,KAAP,IAAiB;AACpC,QAAMC,MAAM,GAAG;AACbC,IAAAA,UAAU,EAAEN,YADC;AAEbO,IAAAA,QAAQ,EAAEH,KAAK,CAACI,QAAN,CAAeC,MAAf,CAAsBC;AAFnB,GAAf;AAIA,QAAMC,IAAI,GAAG,MAAMb,8BAA8B,CAACc,YAA/B,CAA4CP,MAA5C,EAAoDQ,OAApD,EAAnB;AACA,QAAM;AAAEC,IAAAA,KAAK,EAAEC;AAAT,MAAmBJ,IAAI,CAACK,cAAL,CAAoBC,IAApB,CAA0BC,IAAD,IAAU;AAC1D,QAAIA,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;AACzB,aAAOD,IAAI,CAACJ,KAAZ;AACD;AACF,GAJwB,CAAzB;AAKA,SAAOC,KAAP;AACD,CAZD","sourcesContent":["import AmazonCognitoIdentity from \"amazon-cognito-identity-js\";\n\nconst cognitoIdentityServiceProvider = new CognitoIdentityServiceProvider();\nconst USER_POOL_ID = \"eu-west-2_eaV1gT0Qu\";\nconst stripe = require(\"stripe\")(\"sk_test_51Hso3kBe49LY5SzjkToG2M0She5VELBzov1NrkkymrjNVC9U9IIkhw3TC2mE3SesSB3LermKcqjuhaj87q4GlIqX00qhDnxT4H\");\n\nconst getUserEmail = async (event) => {\n  const params = {\n    UserPoolId: USER_POOL_ID,\n    Username: event.identity.claims.username\n  };\n  const user = await cognitoIdentityServiceProvider.adminGetUser(params).promise();\n  const { Value: email } = user.UserAttributes.find((attr) => {\n    if (attr.Name === \"email\") {\n      return attr.Value;\n    }\n  });\n  return email;\n};\n"]},"metadata":{},"sourceType":"module"}