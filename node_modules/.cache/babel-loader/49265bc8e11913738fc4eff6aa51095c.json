{"ast":null,"code":"const {\n  CognitoIdentityServiceProvider\n} = require(\"aws-sdk\");\n\nconst cognitoIdentityServiceProvider = new CognitoIdentityServiceProvider();\nconst USER_POOL_ID = \"eu-west-2_eaV1gT0Qu\";\n\nconst getUserEmail = async event => {\n  const params = {\n    UserPoolId: USER_POOL_ID,\n    Username: event.identity.claims.username\n  };\n  const user = await cognitoIdentityServiceProvider.adminGetUser(params).promise();\n  const {\n    Value: email\n  } = user.UserAttributes.find(attr => {\n    if (attr.Name === \"email\") {\n      return attr.Value;\n    }\n  });\n  return email;\n};\n\nexport { getUserEmail };","map":{"version":3,"sources":["/home/serban/Desktop/bytes/src/context/user.js"],"names":["CognitoIdentityServiceProvider","require","cognitoIdentityServiceProvider","USER_POOL_ID","getUserEmail","event","params","UserPoolId","Username","identity","claims","username","user","adminGetUser","promise","Value","email","UserAttributes","find","attr","Name"],"mappings":"AAAA,MAAM;AAAEA,EAAAA;AAAF,IAAqCC,OAAO,CAAC,SAAD,CAAlD;;AACA,MAAMC,8BAA8B,GAAG,IAAIF,8BAAJ,EAAvC;AACA,MAAMG,YAAY,GAAG,qBAArB;;AAEA,MAAMC,YAAY,GAAG,MAAOC,KAAP,IAAiB;AACpC,QAAMC,MAAM,GAAG;AACbC,IAAAA,UAAU,EAAEJ,YADC;AAEbK,IAAAA,QAAQ,EAAEH,KAAK,CAACI,QAAN,CAAeC,MAAf,CAAsBC;AAFnB,GAAf;AAIA,QAAMC,IAAI,GAAG,MAAMV,8BAA8B,CAACW,YAA/B,CAA4CP,MAA5C,EAAoDQ,OAApD,EAAnB;AACA,QAAM;AAAEC,IAAAA,KAAK,EAAEC;AAAT,MAAmBJ,IAAI,CAACK,cAAL,CAAoBC,IAApB,CAA0BC,IAAD,IAAU;AAC1D,QAAIA,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;AACzB,aAAOD,IAAI,CAACJ,KAAZ;AACD;AACF,GAJwB,CAAzB;AAKA,SAAOC,KAAP;AACD,CAZD;;AAcA,SAASZ,YAAT","sourcesContent":["const { CognitoIdentityServiceProvider } = require(\"aws-sdk\");\nconst cognitoIdentityServiceProvider = new CognitoIdentityServiceProvider();\nconst USER_POOL_ID = \"eu-west-2_eaV1gT0Qu\";\n\nconst getUserEmail = async (event) => {\n  const params = {\n    UserPoolId: USER_POOL_ID,\n    Username: event.identity.claims.username\n  };\n  const user = await cognitoIdentityServiceProvider.adminGetUser(params).promise();\n  const { Value: email } = user.UserAttributes.find((attr) => {\n    if (attr.Name === \"email\") {\n      return attr.Value;\n    }\n  });\n  return email;\n};\n\nexport { getUserEmail };"]},"metadata":{},"sourceType":"module"}