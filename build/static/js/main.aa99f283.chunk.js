(this.webpackJsonpthebyteapp=this.webpackJsonpthebyteapp||[]).push([[0],{255:function(e,t){},257:function(e,t){},268:function(e,t){},270:function(e,t){},297:function(e,t){},299:function(e,t){},300:function(e,t){},305:function(e,t){},307:function(e,t){},326:function(e,t){},338:function(e,t){},341:function(e,t){},389:function(e,t,n){var c={"./amplify-amazon-button_5.entry.js":[401,8],"./amplify-auth-fields_9.entry.js":[402,19],"./amplify-authenticator.entry.js":[403,4],"./amplify-button_3.entry.js":[404,9],"./amplify-chatbot.entry.js":[405,7],"./amplify-checkbox.entry.js":[406,26],"./amplify-confirm-sign-in_7.entry.js":[407,5],"./amplify-container.entry.js":[408,27],"./amplify-federated-buttons_2.entry.js":[409,10],"./amplify-federated-sign-in.entry.js":[410,20],"./amplify-form-field_4.entry.js":[411,28],"./amplify-greetings.entry.js":[412,11],"./amplify-icon-button.entry.js":[413,29],"./amplify-icon.entry.js":[414,23],"./amplify-link.entry.js":[415,30],"./amplify-nav_2.entry.js":[416,12],"./amplify-photo-picker.entry.js":[417,21],"./amplify-picker.entry.js":[418,22],"./amplify-radio-button_2.entry.js":[419,6],"./amplify-s3-album.entry.js":[420,13],"./amplify-s3-image-picker.entry.js":[421,14],"./amplify-s3-image.entry.js":[422,18],"./amplify-s3-text-picker.entry.js":[423,15],"./amplify-s3-text.entry.js":[424,16],"./amplify-select-mfa-type.entry.js":[425,17],"./amplify-sign-in-button.entry.js":[426,24],"./amplify-toast.entry.js":[427,31],"./amplify-tooltip.entry.js":[428,32]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=389,e.exports=r},396:function(e,t,n){},397:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(3),i=n.n(r),a=n(222),s=n.n(a),o=n(15),l=n.n(o),u=n(23),d=n(27),j=n(28),b=n(221),p=n(398),h=n(464),f="\n  mutation UpdateByte(\n    $input: UpdateByteInput!\n    $condition: ModelByteConditionInput\n  ) {\n    updateByte(input: $input, condition: $condition) {\n      id\n      index\n      size\n      content\n      owner\n      price\n      orders {\n        items {\n          id\n          byte_id\n          order_id\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",O=i.a.createContext(),x=function(e){var t=e.children,n=Object(r.useState)([]),i=Object(j.a)(n,2),a=i[0],s=i[1],o=Object(r.useState)(!1),x=Object(j.a)(o,2),m=x[0],y=x[1];Object(r.useEffect)((function(){g()}),[]);var v=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)({id:Object(h.a)()},t),e.prev=1,e.next=4,b.a.graphql(Object(p.b)("\n  mutation ProcessOrder($input: ProcessOrderInput!) {\n    processOrder(input: $input)\n  }\n",{input:n}));case 4:console.log("Order is successful"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,b.a.graphql({query:"\n  query ListBytes(\n    $filter: ModelByteFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    listBytes(filter: $filter, limit: $limit, nextToken: $nextToken) {\n      items {\n        id\n        index\n        size\n        content\n        owner\n        price\n\n        createdAt\n        updatedAt\n      }\n      nextToken\n    }\n  }\n",authMode:"API_KEY"});case 4:t=e.sent,n=t.data,c=n.listBytes.items,s(c),y(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.graphql(Object(p.b)(f,{input:{id:t.id,index:t.index,content:(1-parseInt(t.content)).toString(),owner:n}}));case 3:console.log("toggle is successful"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.jsx)(O.Provider,{value:{bytes:a,loading:m,checkout:v,toggleBit:w},children:t})},m=n(35),y=n(14),v=n(80),g=function(){return Object(c.jsx)("div",{children:Object(c.jsx)("h2",{children:"Oops. Error Page"})})},w=n(462),_=function(){var e=Object(r.useContext)(O).bytes;if(!e.length)return Object(c.jsx)("h3",{children:"No Bytes Available"});return Object(c.jsx)("section",{className:"bytes",children:e.sort((function(e,t){return e.index>t.index})).map((function(e){var t=e.id,n=e.index,r=e.owner,i=e.content;return Object(c.jsxs)("article",{className:"byte",children:[null===r&&Object(c.jsxs)(w.a,{className:"bit",children:[Object(c.jsx)("div",{className:"leftDiv",children:n}),Object(c.jsx)("div",{className:"rightDiv",children:Object(c.jsx)(m.b,{to:"bit/".concat(t),children:Object(c.jsx)("button",{className:"btn2",children:"buy"})})})]}),null!==r&&Object(c.jsxs)(w.a,{className:"bit",children:[Object(c.jsx)("div",{className:"leftDiv",children:n}),Object(c.jsx)("div",{className:"rightDiv",children:Object(c.jsx)(m.b,{to:"bit/".concat(t),children:Object(c.jsx)("button",{className:"btn2",children:i})})})]})]},t)}))})},k=n(110),C=i.a.createContext(),N=function(e){var t=e.children,n=Object(r.useState)([]),i=Object(j.a)(n,2),a=i[0],s=i[1],o=Object(r.useState)(0),l=Object(j.a)(o,2),u=l[0],d=l[1];Object(r.useEffect)((function(){var e=Object(k.a)(a).reduce((function(e,t){return e+t.price}),0);d(parseFloat(e.toFixed(2)))}),[a]);return Object(c.jsx)(C.Provider,{value:{cart:a,total:u,addToCart:function(e){var t=e.id,n=e.index,c=e.price,r=[].concat(Object(k.a)(a),[{id:t,index:n,price:c}]);s(r)},removeFromCart:function(e){var t=Object(k.a)(a).filter((function(t){return t.id!==e}));s(t)},clearCart:function(){s([])},transferCartToOwner:function(e){a.forEach((function(t){try{b.a.graphql(Object(p.b)(f,{input:{id:t.id,index:t.index,content:"0",owner:e}})),console.log("transfer is successful")}catch(n){console.log(n)}}))}},children:t})},B=n(231),S=function(){var e=Object(y.f)(),t=Object(r.useContext)(C),n=t.cart,i=t.total,a=t.removeFromCart;return n.length?Object(c.jsxs)("section",{className:"cart",children:[Object(c.jsx)("header",{children:Object(c.jsx)("h2",{children:"My Cart"})}),Object(c.jsx)("div",{className:"cart-wrapper",children:n.map((function(e){var t=e.id,n=e.index,r=(e.size,e.price);return Object(c.jsx)("article",{className:"cart-item",children:Object(c.jsxs)("div",{className:"details",children:[Object(c.jsxs)("p",{children:["Bit at index ",n]}),Object(c.jsxs)("p",{children:["\xa3 ",r]}),Object(c.jsx)("button",{onClick:function(){return a(t)},children:Object(c.jsx)(B.a,{})})]})},t)}))}),Object(c.jsx)("div",{children:Object(c.jsxs)("h3",{children:["Total: \xa3 ",i]})}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"btn",onClick:function(){return e.push("/checkout")},children:"Checkout"})})]}):Object(c.jsx)("h3",{children:"Empty Cart"})},E=n(463),A=n(229),T=n(57),z=n(34),$=i.a.createContext(),q=function(e){var t=e.children,n=Object(r.useState)(""),i=Object(j.a)(n,2),a=i[0],s=i[1];Object(r.useEffect)((function(){o()}),[]);var o=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.currentAuthenticatedUser().then((function(e){s(e.attributes.email)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsx)($.Provider,{value:{getUserEmail:function(){return a},fetchUserEmail:o},children:t})},P={style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},I=function(){var e=Object(r.useContext)(C),t=e.cart,n=e.total,i=e.clearCart,a=e.transferCartToOwner,s=Object(r.useContext)(O).checkout,o=Object(r.useContext)($).getUserEmail,b=Object(r.useState)({cart:t,total:n,address:null,token:null}),p=Object(j.a)(b,2),h=p[0],f=p[1],x=Object(r.useState)(null),m=Object(j.a)(x,2),v=m[0],g=m[1],w=Object(T.useStripe)(),_=Object(T.useElements)(),k=Object(y.f)();Object(r.useEffect)((function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(h);case 2:return e.next=4,a(o());case 4:return e.next=6,i();case 6:k.push("/");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();h.token&&e()}),[h]);var N=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=_.getElement(T.CardElement),e.next=4,w.createToken(n);case 4:(c=e.sent).error?g(c.error.message):(g(null),r=c.token,f(Object(u.a)(Object(u.a)({},h),{},{token:r.id})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("form",{onSubmit:N,children:[Object(c.jsxs)("div",{className:"checkout-form",children:[Object(c.jsx)("label",{htmlFor:"checkout-address",children:"Shipping Address"}),Object(c.jsx)("input",{id:"checkout-address",type:"text",onChange:function(e){return f(Object(u.a)(Object(u.a)({},h),{},{address:e.target.value}))}}),Object(c.jsxs)("div",{className:"stripe-section",children:[Object(c.jsx)("label",{htmlFor:"stripe-element",children:" Credit or debit card "}),Object(c.jsx)(T.CardElement,{id:"stripe-element",options:P,onChange:function(e){e.error?g(e.error.message):g(null)}})]}),Object(c.jsx)("div",{className:"card-errors",role:"alert",children:v})]}),Object(c.jsx)("button",{type:"submit",className:"btn",children:"Submit Payment"})]})},F=function(){var e=Object(A.a)("pk_test_51Hso3kBe49LY5Szj0HHgQKiOL6XBuSZQbyEeKwziOuCngXSzLhfbnUVpnzD0BOfo4VbJfRk3r6shnWVrjffumHXt00Bs7bAy2O");return Object(c.jsx)("section",{className:"checkout-wrapper",children:Object(c.jsx)(E.a,{children:Object(c.jsx)(T.Elements,{stripe:e,children:Object(c.jsxs)("section",{children:[Object(c.jsx)("h2",{children:"Time to Checkout?"}),Object(c.jsx)(I,{})]})})})})},U=function(){var e=Object(y.g)().id,t=Object(y.f)(),n=Object(r.useContext)(O),i=n.bytes,a=n.toggleBit,s=Object(r.useContext)($).getUserEmail,o=Object(r.useContext)(C).addToCart,j=i.find((function(t){return t.id===e}));if(!j)return Object(c.jsx)("h3",{children:"Loading..."});var b=j.index,p=j.price,h=j.owner,f=j.content;return Object(c.jsx)("section",{className:"byte-details",children:Object(c.jsxs)("div",{children:[Object(c.jsxs)("h2",{children:["Bit at index ",b]}),null===h&&Object(c.jsxs)("div",{className:"detail-description",children:[Object(c.jsxs)("h4",{children:["Price - \xa3 ",p]}),Object(c.jsx)("button",{className:"btn",onClick:function(){o(Object(u.a)({},j)),t.push("/cart")},children:"Add to Cart"})]}),null!==h&&Object(c.jsxs)("div",{className:"detail-description",children:[Object(c.jsxs)("h4",{children:["Contents: ",f]}),s()===j.owner&&Object(c.jsx)("button",{className:"btn",onClick:Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(u.a)({},j));case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),children:"Toggle"})]})]})})},D=function(){var e=Object(r.useState)({index:"",size:"",price:""}),t=Object(j.a)(e,2),n=t[0],i=t[1],a=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,n.index&&n.size&&n.price){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,b.a.graphql(Object(p.b)("\n  mutation CreateByte(\n    $input: CreateByteInput!\n    $condition: ModelByteConditionInput\n  ) {\n    createByte(input: $input, condition: $condition) {\n      id\n      index\n      size\n      content\n      owner\n      price\n      orders {\n        items {\n          id\n          byte_id\n          order_id\n          createdAt\n          updatedAt\n        }\n        nextToken\n      }\n      createdAt\n      updatedAt\n    }\n  }\n",{input:n}));case 6:i({index:"",size:"",price:""}),window.location.reload(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("error creating todo:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)("section",{className:"admin-wrapper",children:Object(c.jsx)(E.a,{children:Object(c.jsxs)("section",{children:[Object(c.jsxs)("header",{className:"form-header",children:[Object(c.jsx)("h3",{children:"Add New Byte"}),Object(c.jsx)(E.b,{})]}),Object(c.jsx)("form",{className:"form-wrapper",onSubmit:a,children:Object(c.jsxs)("div",{className:"form-fields",children:[Object(c.jsxs)("div",{className:"index-form",children:[Object(c.jsx)("p",{children:Object(c.jsx)("label",{htmlFor:"index",children:"Index"})}),Object(c.jsx)("p",{children:Object(c.jsx)("input",{id:"form-index",name:"index",type:"text",placeholder:"Type the index",onChange:function(e){return i(Object(u.a)(Object(u.a)({},n),{},{index:e.target.value,size:1}))},required:!0})})]}),Object(c.jsx)("div",{className:"price-form",children:Object(c.jsxs)("p",{children:[Object(c.jsx)("label",{htmlFor:"price",children:"Price (\xa3)"}),Object(c.jsx)("input",{id:"form-price",name:"price",type:"text",placeholder:"What is the Price of this byte (\xa3)",onChange:function(e){return i(Object(u.a)(Object(u.a)({},n),{},{price:e.target.value}))},required:!0})]})}),Object(c.jsx)("div",{className:"submit-form",children:Object(c.jsx)("button",{className:"btn",type:"submit",children:"Submit"})})]})})]})})})},M=function(){return Object(c.jsx)("header",{className:"main-head",children:Object(c.jsxs)("nav",{children:[Object(c.jsx)("h1",{id:"logo",children:Object(c.jsx)(m.b,{to:"/",children:"The Byte App"})}),Object(c.jsx)("ul",{children:Object(c.jsx)("li",{children:Object(c.jsx)(m.b,{to:"/cart",children:"Cart"})})})]})})},L={aws_project_region:"eu-west-2",aws_cognito_identity_pool_id:"eu-west-2:0bc556be-5bac-4fd0-b102-78d61339fd6b",aws_cognito_region:"eu-west-2",aws_user_pools_id:"eu-west-2_eaV1gT0Qu",aws_user_pools_web_client_id:"ogtsc27pohekbte38no9m3ck4",oauth:{},aws_user_files_s3_bucket:"thebyteappcdc68999fdd2490fac9903262d2f285d103333-prod",aws_user_files_s3_bucket_region:"eu-west-2",aws_appsync_graphqlEndpoint:"https://ehlsdsxdw5albmqsoatkr3sazq.appsync-api.eu-west-2.amazonaws.com/graphql",aws_appsync_region:"eu-west-2",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_appsync_apiKey:"da2-7ei476ocdfbczme6o3jgodho4q",aws_content_delivery_bucket:"thebyteapp-20201129204728-hostingbucket-prod",aws_content_delivery_bucket_region:"eu-west-2",aws_content_delivery_url:"http://thebyteapp-20201129204728-hostingbucket-prod.s3-website.eu-west-2.amazonaws.com"};v.default.configure(L);var H=function(){return Object(c.jsxs)(m.a,{children:[Object(c.jsx)(M,{}),Object(c.jsxs)(y.c,{children:[Object(c.jsx)(y.a,{exact:!0,path:"/",children:Object(c.jsx)(_,{})}),Object(c.jsx)(y.a,{path:"/cart",children:Object(c.jsx)(S,{})}),Object(c.jsx)(y.a,{path:"/checkout",children:Object(c.jsx)(F,{})}),Object(c.jsx)(y.a,{path:"/admin",children:Object(c.jsx)(D,{})}),Object(c.jsx)(y.a,{path:"/bit/:id",children:Object(c.jsx)(U,{})}),Object(c.jsx)(y.a,{path:"*",children:Object(c.jsx)(g,{})})]})]})};n(396);s.a.render(Object(c.jsx)(q,{children:Object(c.jsx)(x,{children:Object(c.jsx)(N,{children:Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(H,{})})})})}),document.getElementById("root"))}},[[397,2,3]]]);
//# sourceMappingURL=main.aa99f283.chunk.js.map